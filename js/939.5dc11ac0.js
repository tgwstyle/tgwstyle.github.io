"use strict";(self["webpackChunktgw_blog"]=self["webpackChunktgw_blog"]||[]).push([[939],{86939:function(t,e,a){a.r(e),a.d(e,{default:function(){return k}});var n=a(66252),l=a(2262),u=a(3577),o=a(22628),i=a(48352),r=a(42119),c=a(92578),d=a(45244),s={class:"add_article"},p={class:"add_article-select"},f=(0,n._)("div",{class:"add_article-title"},"文章类型",-1),g=(0,n._)("div",{class:"add_article-title paddingTop"},"文章标题",-1),m=(0,n._)("div",{class:"add_article-title paddingTop"},"文章概要",-1),v={class:"paddingTop"},h={class:"footer_btn"},_=(0,n.Uk)("返回"),U=(0,n.aZ)({__name:"addArticle",setup:function(t){var e=(0,r.tv)(),a=(0,l.iH)("新增"),U=(0,l.qj)({type:[],title:"",content:"",introduce:""}),b=(0,l.iH)(""),k=(0,l.iH)("undo redo | image"),w=(0,l.qj)([]),y=((0,l.iH)(""),function(t){console.log(t)}),S=(0,l.qj)([]),V=function(){var t=e.currentRoute.value.params.id;t&&(a.value="更新数据",(0,o.v_)(i.Z.queryArticleDetail,{articleId:t}).then((function(t){if(200===t.status&&t.data.success){var e=t.data.data,a=e.tagList,n=void 0===a?"":a,l=e.articleTitle,u=e.articleIntroduce,o=e.articleContent,i=[];w.map((function(t){n.indexOf(t.tagId)>-1&&i.push(JSON.stringify(t))})),U.type=i,U.title=l,U.introduce=u,U.content=o}})))},I=function(){(0,o.U2)(i.Z.queryArticleType).then((function(t){200===t.status&&(console.log("ret.data",t.data),t.data.success&&(t.data.data.forEach((function(t){return w.push(t)})),V()))}))},C=function(t,e,a){var n=new FileReader;n.readAsDataURL(a[0]),n.onload=function(t){e({url:t.currentTarget.result,height:"auto",width:"auto"})}},T=function(){var t=document.documentElement.clientHeight,e=t-500+"px";b.value=e},H=function(){var t=c.kN.service({lock:!0,text:"Loading",background:"rgba(0, 0, 0, 0.7)"}),a=e.currentRoute.value.params.id;S=[],U.type.map((function(t){S.push(JSON.parse(t).tagId)})),(0,o.v_)(i.Z.addOrrUpdateArticle,{articleTitle:U.title,articleContent:U.content,userId:"1000000001",articleId:a||"",tagList:S.toString(),articleIntroduce:U.introduce}).then((function(a){t.close(),200===a.status&&a.data&&a.data.success?(U.title="",U.content="",U.introduce="",U.type=[],S=[],e.back()):(0,d.z8)({type:"error",message:a.data.msg})}))},W=function(){e.go(-1)};return T(),I(),function(t,e){var o=(0,n.up)("el-checkbox-button"),i=(0,n.up)("el-checkbox-group"),r=(0,n.up)("el-input"),c=(0,n.up)("v-md-editor"),d=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",p,[f,(0,n.Wm)(i,{modelValue:(0,l.SU)(U).type,"onUpdate:modelValue":e[0]||(e[0]=function(t){return(0,l.SU)(U).type=t}),size:"large",onChange:y},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,l.SU)(w),(function(t){return(0,n.wg)(),(0,n.j4)(o,{key:t.tagId,label:JSON.stringify(t)},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,u.zw)(t.tagName),1)]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"]),g,(0,n.Wm)(r,{modelValue:(0,l.SU)(U).title,"onUpdate:modelValue":e[1]||(e[1]=function(t){return(0,l.SU)(U).title=t}),placeholder:"请输入文章标题"},null,8,["modelValue"]),m,(0,n.Wm)(r,{modelValue:(0,l.SU)(U).introduce,"onUpdate:modelValue":e[2]||(e[2]=function(t){return(0,l.SU)(U).introduce=t}),placeholder:"请输入文章概要"},null,8,["modelValue"])]),(0,n._)("div",v,[(0,n.Wm)(c,{"left-toolbar":k.value,modelValue:(0,l.SU)(U).content,"onUpdate:modelValue":e[3]||(e[3]=function(t){return(0,l.SU)(U).content=t}),height:(0,l.SU)(b),"disabled-menus":[],onUploadImage:C},null,8,["left-toolbar","modelValue","height"])]),(0,n._)("div",h,[(0,n.Wm)(d,{type:"primary",onClick:H},{default:(0,n.w5)((function(){return[(0,n.Uk)((0,u.zw)(a.value),1)]})),_:1}),(0,n.Wm)(d,{onClick:W},{default:(0,n.w5)((function(){return[_]})),_:1})])])}}});const b=U;var k=b}}]);
//# sourceMappingURL=939.5dc11ac0.js.map