{"version":3,"file":"js/141.9ff5ad1a.js","mappings":"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","sources":["webpack://tgw-blog/./src/views/addArticle.vue?80fe","webpack://tgw-blog/./src/views/addArticle.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, createVNode as _createVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"add_article\" }\nconst _hoisted_2 = { class: \"add_article-select\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"add_article-title\" }, \"Select article type\", -1)\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"add_article-title paddingTop\" }, \"Enter title\", -1)\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"add_article-title paddingTop\" }, \"Enter introduce\", -1)\nconst _hoisted_6 = { class: \"paddingTop\" }\nconst _hoisted_7 = { class: \"footer_btn\" }\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"back\")\n\nimport { reactive, ref } from \"vue\";\nimport { get, post } from \"@/common/http\";\nimport apiPath from \"@/common/apiPath\";\nimport { useRouter } from \"vue-router\";\nimport { ElLoading, ElMessage } from \"element-plus\";\n\ninterface Type {\n  type: string;\n  text: string;\n}\n\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'addArticle',\n  setup(__props) {\n\nconst routes = useRouter();\n\nconst btnName = ref(\"Add Article\");\n\n/** 文章所有的内容 */\nlet articleContent = reactive({\n  type: [],\n  title: \"\",\n  content: \"\",\n  introduce: \"\",\n});\n\n/** markdown高度 */\nlet mheight = ref(\"\");\n\n/** 菜单列表 */\nconst menuLis = ref(\"undo redo | image\");\n\n/** 文章类型 */\nlet articleType: Type[] = reactive([]);\n\n/** markdown */\nlet text = ref(\"\");\n\nconst selectType = (val: any) => {\n  console.log(val);\n};\n\nlet list: Type[] = reactive([]);\n\n/** 获取路由参数 */\nconst getRouterParams = () => {\n  const { id } = routes.currentRoute.value.params;\n  if (id) {\n    btnName.value = \"Update Article\";\n    get(apiPath.getArticleDetail, {\n      id,\n    }).then((ret: any) => {\n      if (ret.status === 200) {\n        const { type, title, content, introduce } = ret.data.data;\n        articleContent.type = type;\n        articleContent.title = title;\n        articleContent.content = content;\n        articleContent.introduce = introduce;\n      }\n    });\n  }\n};\n\n/** 获取文章类型列表 */\nconst getArtivcleType = () => {\n  get(apiPath.articleType).then((ret: any) => {\n    if (ret.status === 200) {\n      ret.data.forEach((item: any) => {\n        return articleType.push(item);\n      });\n    }\n  });\n};\n\n/** 图片上传: 将图片转为base64 */\nconst uploadImage = (event: any, insertImage: any, file: any) => {\n  let newFile = new FileReader();\n  newFile.readAsDataURL(file[0]);\n  newFile.onload = (e: any) => {\n    insertImage({\n      url: e.currentTarget.result,\n      height: \"auto\",\n      width: \"auto\",\n    });\n  };\n};\n\n/** 获取页面的可用高度 */\nconst getClintHeight = () => {\n  let height = document.documentElement.clientHeight;\n  let h = height - 500 + \"px\";\n  mheight.value = h;\n};\n\n/** 保存文章 */\nconst saveArticle = () => {\n  const loading = ElLoading.service({\n    lock: true,\n    text: \"Loading\",\n    background: \"rgba(0, 0, 0, 0.7)\",\n  });\n\n  const { id } = routes.currentRoute.value.params;\n\n  articleContent.type.map((item: any) => {\n    list.push(JSON.parse(item));\n  });\n\n  post(apiPath.saveArticle, {\n    ...articleContent,\n    typeList: list,\n    id,\n  }).then((ret: any) => {\n    loading.close();\n    if (ret.status === 200) {\n      articleContent.title = \"\";\n      articleContent.content = \"\";\n      articleContent.introduce = \"\";\n      articleContent.type = [];\n      ElMessage({\n        message: ret.data.msg,\n        type: \"success\",\n      });\n      setTimeout(() => {\n        routes.go(-1);\n      }, 500);\n    } else {\n      ElMessage({\n        message: ret.data.msg,\n        type: \"success\",\n      });\n    }\n  });\n};\n\n/** 返回 */\nconst back = () => {\n  routes.go(-1);\n};\n\ngetClintHeight(); /** 获取页面的可用高度 */\ngetArtivcleType(); /** 获取文章类型列表 */\ngetRouterParams(); /** 获取路由参数 */\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_checkbox_button = _resolveComponent(\"el-checkbox-button\")!\n  const _component_el_checkbox_group = _resolveComponent(\"el-checkbox-group\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_v_md_editor = _resolveComponent(\"v-md-editor\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createVNode(_component_el_checkbox_group, {\n        modelValue: _unref(articleContent).type,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(articleContent).type) = $event)),\n        size: \"large\",\n        onChange: selectType\n      }, {\n        default: _withCtx(() => [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(articleType), (item) => {\n            return (_openBlock(), _createBlock(_component_el_checkbox_button, {\n              key: item.type,\n              label: JSON.stringify(item)\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(item.text), 1)\n              ]),\n              _: 2\n            }, 1032, [\"label\"]))\n          }), 128))\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"]),\n      _hoisted_4,\n      _createVNode(_component_el_input, {\n        modelValue: _unref(articleContent).title,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(articleContent).title) = $event)),\n        placeholder: \"Please input article title\"\n      }, null, 8, [\"modelValue\"]),\n      _hoisted_5,\n      _createVNode(_component_el_input, {\n        modelValue: _unref(articleContent).introduce,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(articleContent).introduce) = $event)),\n        placeholder: \"Please input article introduce\"\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createVNode(_component_v_md_editor, {\n        \"left-toolbar\": menuLis.value,\n        modelValue: _unref(articleContent).content,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(articleContent).content) = $event)),\n        height: _unref(mheight),\n        \"disabled-menus\": [],\n        onUploadImage: uploadImage\n      }, null, 8, [\"left-toolbar\", \"modelValue\", \"height\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: saveArticle\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(btnName.value), 1)\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_el_button, { onClick: back }, {\n        default: _withCtx(() => [\n          _hoisted_8\n        ]),\n        _: 1\n      })\n    ])\n  ]))\n}\n}\n\n})","import script from \"./addArticle.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./addArticle.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./addArticle.vue?vue&type=style&index=0&id=f26f6ea0&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","__name","setup","__props","routes","btnName","articleContent","type","title","content","introduce","mheight","menuLis","articleType","selectType","val","console","log","list","getRouterParams","id","currentRoute","value","params","apiPath","then","ret","status","data","getArtivcleType","forEach","item","push","uploadImage","event","insertImage","file","newFile","FileReader","readAsDataURL","onload","e","url","currentTarget","result","height","width","getClintHeight","document","documentElement","clientHeight","h","saveArticle","loading","lock","text","background","map","JSON","parse","typeList","close","message","msg","setTimeout","go","back","_ctx","_cache","_component_el_checkbox_button","_component_el_checkbox_group","_component_el_input","_component_v_md_editor","_component_el_button","modelValue","$event","size","onChange","default","key","label","stringify","placeholder","onUploadImage","onClick","__exports__"],"sourceRoot":""}