{"version":3,"file":"js/939.5dc11ac0.js","mappings":"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","sources":["webpack://tgw-blog/./src/views/addArticle.vue?80fe","webpack://tgw-blog/./src/views/addArticle.vue"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, createVNode as _createVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"add_article\" }\nconst _hoisted_2 = { class: \"add_article-select\" }\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"add_article-title\" }, \"文章类型\", -1)\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"add_article-title paddingTop\" }, \"文章标题\", -1)\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", { class: \"add_article-title paddingTop\" }, \"文章概要\", -1)\nconst _hoisted_6 = { class: \"paddingTop\" }\nconst _hoisted_7 = { class: \"footer_btn\" }\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\"返回\")\n\nimport { reactive, ref } from \"vue\";\nimport { get, post } from \"@/common/http\";\nimport apiPath from \"@/common/apiPath\";\nimport { useRouter } from \"vue-router\";\nimport { ElLoading, ElMessage } from \"element-plus\";\nimport router from \"@/router\";\n\ninterface Type {\n  type: string;\n  text: string;\n}\n\ninterface itemType {\n  tagId: \"\";\n  tagName: \"\";\n}\n\n/** 文章类型 */\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'addArticle',\n  setup(__props) {\n\nconst routes = useRouter();\n\nconst btnName = ref(\"新增\");\n\n/** 文章所有的内容 */\nlet arContent = reactive({\n  type: [],\n  title: \"\",\n  content: \"\",\n  introduce: \"\",\n});\n\n/** markdown高度 */\nlet mheight = ref(\"\");\n\n/** 菜单列表 */\nconst menuLis = ref(\"undo redo | image\");\n\nlet articleType: itemType[] = reactive([]);\n\n/** markdown */\nlet text = ref(\"\");\n\nconst selectType = (val: any) => {\n  console.log(val);\n};\n\nlet list: Type[] = reactive([]);\n\n/** 获取路由参数 */\nconst getRouterParams = () => {\n  const { id } = routes.currentRoute.value.params;\n  if (id) {\n    btnName.value = \"更新数据\";\n    post(apiPath.queryArticleDetail, {\n      articleId: id,\n    }).then((ret: any) => {\n      if (ret.status === 200 && ret.data.success) {\n        let {\n          tagList = \"\",\n          articleTitle,\n          articleIntroduce,\n          articleContent,\n        } = ret.data.data;\n\n        let arr: any = [];\n        articleType.map((item: any) => {\n          if (tagList.indexOf(item.tagId) > -1) {\n            arr.push(JSON.stringify(item));\n          }\n        });\n        arContent.type = arr;\n        arContent.title = articleTitle;\n        arContent.introduce = articleIntroduce;\n        arContent.content = articleContent;\n      }\n    });\n  }\n};\n\n/** 获取文章类型列表 */\nconst getArtivcleType = () => {\n  get(apiPath.queryArticleType).then((ret: any) => {\n    if (ret.status === 200) {\n      console.log(\"ret.data\", ret.data);\n      if (ret.data.success) {\n        ret.data.data.forEach((item: itemType) => {\n          return articleType.push(item);\n        });\n        getRouterParams(); /** 获取路由参数 */\n      }\n    }\n  });\n};\n\n/** 图片上传: 将图片转为base64 */\nconst uploadImage = (event: any, insertImage: any, file: any) => {\n  let newFile = new FileReader();\n  newFile.readAsDataURL(file[0]);\n  newFile.onload = (e: any) => {\n    insertImage({\n      url: e.currentTarget.result,\n      height: \"auto\",\n      width: \"auto\",\n    });\n  };\n};\n\n/** 获取页面的可用高度 */\nconst getClintHeight = () => {\n  let height = document.documentElement.clientHeight;\n  let h = height - 500 + \"px\";\n  mheight.value = h;\n};\n\n/** 保存文章 */\nconst saveArticle = () => {\n  const loading = ElLoading.service({\n    lock: true,\n    text: \"Loading\",\n    background: \"rgba(0, 0, 0, 0.7)\",\n  });\n\n  const { id } = routes.currentRoute.value.params;\n  list = [];\n  arContent.type.map((item: any) => {\n    list.push(JSON.parse(item).tagId);\n  });\n\n  post(apiPath.addOrrUpdateArticle, {\n    articleTitle: arContent.title,\n    articleContent: arContent.content,\n    userId: \"1000000001\",\n    articleId: id ? id : \"\",\n    tagList: list.toString(),\n    articleIntroduce: arContent.introduce,\n  }).then((ret: any) => {\n    loading.close();\n    if (ret.status === 200 && ret.data && ret.data.success) {\n      arContent.title = \"\";\n      arContent.content = \"\";\n      arContent.introduce = \"\";\n      arContent.type = [];\n      list = [];\n      routes.back();\n    } else {\n      ElMessage({\n        type: \"error\",\n        message: ret.data.msg,\n      });\n    }\n  });\n};\n\n/** 返回 */\nconst back = () => {\n  routes.go(-1);\n};\n\ngetClintHeight();\n/** 获取页面的可用高度 */\ngetArtivcleType(); /** 获取文章类型列表 */\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_checkbox_button = _resolveComponent(\"el-checkbox-button\")!\n  const _component_el_checkbox_group = _resolveComponent(\"el-checkbox-group\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_v_md_editor = _resolveComponent(\"v-md-editor\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _hoisted_3,\n      _createVNode(_component_el_checkbox_group, {\n        modelValue: _unref(arContent).type,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(arContent).type) = $event)),\n        size: \"large\",\n        onChange: selectType\n      }, {\n        default: _withCtx(() => [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(articleType), (item) => {\n            return (_openBlock(), _createBlock(_component_el_checkbox_button, {\n              key: item.tagId,\n              label: JSON.stringify(item)\n            }, {\n              default: _withCtx(() => [\n                _createTextVNode(_toDisplayString(item.tagName), 1)\n              ]),\n              _: 2\n            }, 1032, [\"label\"]))\n          }), 128))\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"]),\n      _hoisted_4,\n      _createVNode(_component_el_input, {\n        modelValue: _unref(arContent).title,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(arContent).title) = $event)),\n        placeholder: \"请输入文章标题\"\n      }, null, 8, [\"modelValue\"]),\n      _hoisted_5,\n      _createVNode(_component_el_input, {\n        modelValue: _unref(arContent).introduce,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(arContent).introduce) = $event)),\n        placeholder: \"请输入文章概要\"\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _createVNode(_component_v_md_editor, {\n        \"left-toolbar\": menuLis.value,\n        modelValue: _unref(arContent).content,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(arContent).content) = $event)),\n        height: _unref(mheight),\n        \"disabled-menus\": [],\n        onUploadImage: uploadImage\n      }, null, 8, [\"left-toolbar\", \"modelValue\", \"height\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_7, [\n      _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: saveArticle\n      }, {\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(btnName.value), 1)\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_el_button, { onClick: back }, {\n        default: _withCtx(() => [\n          _hoisted_8\n        ]),\n        _: 1\n      })\n    ])\n  ]))\n}\n}\n\n})","import script from \"./addArticle.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./addArticle.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./addArticle.vue?vue&type=style&index=0&id=df3fcf7c&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","class","_hoisted_2","_hoisted_3","_","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","__name","setup","__props","routes","btnName","arContent","type","title","content","introduce","mheight","menuLis","articleType","selectType","val","console","log","list","getRouterParams","id","currentRoute","value","params","apiPath","articleId","then","ret","status","data","success","tagList","articleTitle","articleIntroduce","articleContent","map","item","indexOf","tagId","push","JSON","stringify","getArtivcleType","forEach","uploadImage","event","insertImage","file","newFile","FileReader","readAsDataURL","onload","e","url","currentTarget","result","height","width","getClintHeight","document","documentElement","clientHeight","h","saveArticle","loading","lock","text","background","parse","userId","toString","close","back","message","msg","go","_ctx","_cache","_component_el_checkbox_button","_component_el_checkbox_group","_component_el_input","_component_v_md_editor","_component_el_button","modelValue","$event","size","onChange","default","key","label","tagName","placeholder","onUploadImage","onClick","__exports__"],"sourceRoot":""}